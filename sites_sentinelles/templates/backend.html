{% extends 'base.html'%}
<!--Block Title-->
{%  block title %}  STATISTICS {% endblock title %}
<!--Navbar-->

{%  block navbar %} bg-warning {% endblock navbar %}
{% block nav-content %}
<span class="text-dark"><i class="fas fa-chart-bar"></i>&nbsp;&nbsp; DATA </span>
{% endblock nav-content %}

<!-- page content-->
{% block content %}

    <div class="container" style="width: 1500px; font-size: 10px;">
                <!--Button-->
                <br>
                &nbsp;&nbsp;&nbsp;
                <nav class="navbar navbar-expand-lg  bg-orange py-1 shadow">
                    <div class="container-fluid">
                      <a class="navbar-brand" href="#"></a>
                      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                      </button>
                      <div class="collapse navbar-collapse" id="navbarNav">
                        <a href="{% url 'login' %}" class="btn btn-danger"><i class="fas fa-power-off"></i></a> &nbsp;
                        <a href="{%url 'register'%}" class="btn btn-success"><i class="fas fa-plus-circle"></i>&nbsp;&nbsp;New record</a> &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="{%url 'home'%}" class="btn btn-info"><i class="fas fa-tachometer-alt"></i>&nbsp;&nbsp;Dashboard</a>
                      </div>
                    </div>
                </nav>
                

                <!--HEADER TITLE--><br><br>
                <h6 class="card p-2 bg-secondary text-light text-center mb-3"> LIST OF ELEMENTS</h6>


                <!--TABLE-->
                <br>
              <div class="table-responsive">
              <table id="bootstrapdatatable" class="table table-striped table-bordered" width="130%">
                <!-- <table  id="bootstrapdatatable" class="table table-bordered text-center">-->
                <thead class="custom-thead">
                    <!--<thead class="table-secondary">-->
                        <tr>
                            
                            <th style=" background-color: #d1e9f5;"> Sites </th>
                            <th style=" background-color: #d1e9f5;"> Groupe d'Ages </th>
                            <th style=" background-color: #d1e9f5;"> Sexe </th>
                            <th style="background-color: #d1e9f5;"> Hospitalisation</th>
                            <th style="background-color: #d1e9f5;"> IRA </th>
                            <th style="background-color: #d1e9f5;">Suspect Covid</th>
                            <th style="background-color: #d1e9f5;"> Cas Prelevés</th>               
                            <th style="background-color: #d1e9f5;">Cas Positif Covid </th>
                            <th style="background-color: #d1e9f5;">  IRA Positif Covid </th>
                            <th style="background-color: #d1e9f5;">  Decès Covid </th>  
                            <th style="background-color: #d1e9f5;">  Decès IRA Covid </th>
                            <th style="background-color: #d1e9f5;">  Statut Vaccinal </th>                                 
                            <th style=" background-color: #d1e9f5;">  Edit Element </th>
                            <th style=" background-color: #d1e9f5;">  Delete Element </th>
                        
                        </tr>           
                    </thead>
                    <tbody>
                    {% for data in sentinelles %}

                        <tr>
                           
                            <td>{{data.Sites_sentinelles}}</td>
                            <td>{{data.Groupe_age}}</td>
                            <td>{{data.Sexe}}</td>
                            <td>{{data.Hospitalisation}}</td>
                            <td>{{data.IRA}}</td>
                            <td>{{data.Suspect_COVID}}</td>
                            <td>{{data.Cas_Preleves}}</td>
                            <td>{{data.Cas_Positif_Covid}}</td> 
                            <td>{{data.IRA_Positif_Covid}}</td>
                            <td>{{data.Deces_covid}}</td>
                            <td>{{data.Deces_IRA_covid}}</td>
                            <td>{{data.Statut_Vaccinal}}</td>  
                        
                            <td><a href="{% url 'edit' data.id %}" class="btn btn-primary" title="Edit"><i class="fas fa-pencil-alt"></i></a> 
                              
                            <td>
                                <button class="btn btn-danger delete-btn" data-id="{{ element.id }}" data-bs-toggle="modal" data-bs-target="#confirmation-modal"><i class="fas fa-trash-alt"></i></a>
                            </td>
                            {% empty %}
                            <td colspan="12" class="text-danger"><strong>No Records Found </strong></td> 
                            

                        </tr>                       
                    {% endfor %}           
                    </tbody>                   
                </table>


                <script>
                            // Récupère tous les boutons de suppression
                    const deleteButtons = document.querySelectorAll('.delete-btn');

                    // Pour chaque bouton de suppression, ajoute un écouteur d'événement "click"
                    deleteButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Récupère l'ID de l'élément associé à ce bouton
                        const elementId = button.dataset.id;
                        
                        // Récupère l'input masqué du formulaire de suppression
                        const deleteForm = document.querySelector('#delete-form');
                        const deleteIdInput = deleteForm.querySelector('.delete-id');
                        
                        // Stocke l'ID de l'élément dans l'input masqué
                        deleteIdInput.value = elementId;
                    });
                    });
                </script>
                   
                <!-- Modal -->

                                

                                   
                  
              </div>
 </div>

{% endblock content %} 



                
                           

                
                           